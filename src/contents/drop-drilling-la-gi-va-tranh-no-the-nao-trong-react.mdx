---
title: Drop drilling lÃ  gÃ¬ vÃ  trÃ¡nh nÃ³ tháº¿ nÃ o trong React?
description: Prop Drilling lÃ  má»™t khÃ¡i niá»‡m Ä‘Æ°á»£c nháº¯c Ä‘áº¿n trong React, Ä‘Ã´i khi khÃ´ng thá»ƒ trÃ¡nh khá»i, trong nhiá»u trÆ°á»ng há»£p chÃºng ta khÃ´ng nÃªn Ã¡p dá»¥ng nÃ³. Trong bÃ i viáº¿t láº§n nÃ y, chÃºng ta sáº½ xem xÃ©t nÃ³ lÃ  gÃ¬ vÃ  lÃ½ do pháº£i trÃ¡nh nÃ³ nhÆ° Ä‘á» cáº­p á»Ÿ tiÃªu Ä‘á».
tags: React
author: Trá»ng DÆ°Æ¡ng Äá»©c
publishAt: 2023-08-18T10:26:00.000Z
createdAt: 2023-08-18T10:26:23.000Z
updatedAt: 2024-09-21T09:26:42.322Z
views: 214
slug: drop-drilling-la-gi-va-tranh-no-the-nao-trong-react
---

Prop Drilling lÃ  má»™t khÃ¡i niá»‡m Ä‘Æ°á»£c nháº¯c Ä‘áº¿n trong React, Ä‘Ã´i khi khÃ´ng thá»ƒ trÃ¡nh khá»i, trong nhiá»u trÆ°á»ng há»£p chÃºng ta khÃ´ng nÃªn Ã¡p dá»¥ng nÃ³. Trong bÃ i viáº¿t láº§n nÃ y, chÃºng ta sáº½ xem xÃ©t nÃ³ lÃ  gÃ¬ vÃ  lÃ½ do pháº£i trÃ¡nh nÃ³ nhÆ° Ä‘á» cáº­p á»Ÿ tiÃªu Ä‘á».

## Props trong React

Äá»ƒ hiá»ƒu **Drop drilling**, trÆ°á»›c tiÃªn chÃºng ta cáº§n lÃ m rÃµÂ `props` lÃ  gÃ¬Â trong React vÃ  cÃ¡ch chÃºng Ä‘Ã³ng vai trÃ² quan trá»ng trongÂ sá»± thÃ nh cÃ´ng cá»§a ReactÂ liÃªn quan Ä‘áº¿n chia sáº» luá»“ng dá»¯ liá»‡u má»™t chiá»u.

Náº¿u báº¡n Ä‘Ã£ biáº¿t vá» props trong React, cÃ³ thá»ƒ bá» qua pháº§n nÃ y vÃ  Ä‘áº¿n pháº§n tiáº¿p theo. NhÆ°ng báº¡n cÅ©ng cÃ³ thá»ƒ Ä‘á»c Ä‘á»ƒ há»c thÃªm Ä‘Æ°á»£c Ä‘iá»u gÃ¬ Ä‘Ã³ má»›i, máº·c dÃ¹ báº¡n Ä‘Ã£ lÃ m viá»‡c vá»›i React Ä‘Æ°á»£c má»™t thá»i gian.

Äáº§u tiÃªn vÃ  hÆ¡n háº¿t, `props` lÃ  viáº¿t táº¯t cá»§aÂ **Properties**. **Props** Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ giao tiáº¿p tá»« thÃ nh pháº§n nÃ y xuá»‘ng thÃ nh pháº§n khÃ¡c. Cho vÃ­ dá»¥, má»™t component cha cÃ³ thá»ƒ truyá»n thÃ´ng tin cho component con cá»§a nÃ³ thÃ´ng qua `props`. Äá»ƒ truyá»n dÆ°á»›i dáº¡ng props, báº¡n sáº½ cáº§n thÃªm viáº¿t JSX nhÆ° viáº¿t má»™t tháº» HTML vÃ  truyá»n dá»¯ liá»‡u thÃ´ng qua `props` nhÆ° cÃ¡ch báº¡n viáº¿t attributes cho tháº».

ÄÃ¢y lÃ  má»™t vÃ­ dá»¥ Ä‘Æ¡n giáº£n vá» viá»‡c truyá»n props tá»« cha máº¹ sang thÃ nh pháº§n con vÃ  Ä‘á»c nÃ³ á»Ÿ Ä‘Ã³:

```tsx
// Parent Component

function ProductDetails() {
  return (
    <ProductHeader
      className="parent-component"
      productName="The best product ever"
    />
  );
}

// Child Component accessing the whole props object
function ProductHeader(props) {
  return (
    <div className={props.className}>
      <h1>{props.productName}</h1>
    </div>
  );
}

// Child Component destructuring the props object
function ProductHeader({ className, productName }) {
  return (
    <div className={className}>
      <h1>{productName}</h1>
    </div>
  );
}
```

Báº¡n khÃ´ng chá»‰ cÃ³ thá»ƒ chuyá»ƒn cÃ¡c giÃ¡ trá»‹ thÃ´ng qua cÃ¡c props xuá»‘ng con cá»§a nÃ³ mÃ  cÃ²n cÃ³ thá»ƒ gá»­i toÃ n bá»™ cÃ¡c thÃ nh pháº§n thÃ´ng qua Ä‘Ã³, má»™t khÃ¡i niá»‡m phá»• biáº¿n khi lÃ m viá»‡c vá»›i React, vÃ  diá»u nÃ y láº¡i trá»Ÿ nÃªn quan trá»ng khi chÃºng ta nÃ³i vá» cÃ¡ch trÃ¡nh prop drilling. ÄÃ¢y lÃ  má»™t vÃ­ dá»¥ vá» nÃ³:

```tsx
function ProductDetails() {
  return (
    <ProductHeader>
      <div>
        <h1>The best product ever</h1>
      </div>
    </ProductHeader>
  )
}

function ProductHeader({ children }) {
  return <div>{children}</div>
}
```

NhÆ° nÃ y lÃ  sao?. trÆ°á»›c khi giáº£i thÃ­ch, chÃºng ta cáº§n biáº¿t **Prop drilling** lÃ  gÃ¬?

## Prop drilling lÃ  gÃ¬?

BÃ¢y giá» chÃºng ta Ä‘Ã£ hiá»ƒu vá» props trong React, hÃ£y nÃ³i vá» **Prop drilling** vÃ  táº¡i sao nÃ³ cÃ³ thá»ƒ trá»Ÿ thÃ nh má»™t váº¥n Ä‘á».

ChÃºng ta nÃ³i vá» **Prop drilling** khi chÃºng ta truyá»n muá»‘n truyá»n má»™t prop xuá»‘ng nhiá»u cáº¥p Ä‘á»™ bÃªn trong má»™t component. ThÆ°á»ng thÃ¬ cÃ¡c props nÃ y Ä‘Æ°á»£c chuyá»ƒn qua cÃ¡c component mÃ  chÃºng khÃ´ng cáº§n quan tÃ¢m Ä‘áº¿n nhÆ°ng láº¡i cáº§n giÃºp chuyá»ƒn cÃ¡c props Ä‘Ã³ xuá»‘ng má»™t Ä‘iá»ƒm nháº¥t Ä‘á»‹nh.

ÄÃ¢y lÃ  má»™t vÃ­ dá»¥ vá» Ä‘iá»u Ä‘Ã³. HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t cÃ¢y component nhÆ° tháº¿ nÃ y:

```tsx
<App>
  <Header />
  <MainContent> <- children of App
    <ProductList> <- children of MainContent
      <ProductCard> <- children of ProductList
        <ProductDetailsModal> <- children of ProductCard
          <ProductDetails> <- children of ProductDetailsModal
            <ProductHeader />
            <ProductDescription />
            <ProductPrice />
          </ProductDetails>
        </ProductDetailsModal>
      </ProductCard>
    </ProductList>
  </MainContent>
  <Footer />
</App>
```

BÃ¢y giá», á»Ÿ cáº¥p Ä‘á»™ root, báº¡n láº¥y dá»¯ liá»‡u tá»« API vá» danh sÃ¡ch sáº£n pháº©m (products) vÃ  cáº§n Ä‘áº©y nÃ³ xuá»‘ng component cáº§n nÃ³. 

HÃ£y tÆ°á»Ÿng tÆ°á»£ng component cáº§n nÃ³ lÃ  `<ProductHeader />` Ä‘á»ƒ phá»¥c vá»¥ cho viá»‡n hiá»ƒn thá»‹ tÃªn sáº£n pháº©m (productName). NhÃ¬n vÃ o cÃ¢y component cá»§a chÃºng ta, Ä‘á»“ng nghÄ©a vá»›i viá»‡c chÃºng ta pháº£i truyá»n má»™t prop xuá»‘ng 6, 7 levels trong cÃ¢y Ä‘á»ƒ cho duy nháº¥t tháº±ng <ProductHeader /> sá»­ dá»¥ng.

```tsx
const productName = 'The best product ever'

-- Tree component --
<App productName={productName}>
  <Header />
  <MainContent productName={productName}>
    <ProductList productName={productName}>
      <ProductCard productName={productName}>
        <ProductDetailsModal productName={productName}>
          <ProductDetails productName={productName}>
            <ProductHeader productName={productName} />
            <ProductDescription />
            <ProductPrice />
          </ProductDetails>
        </ProductDetailsModal>
      </ProductCard>
    </ProductList>
  </MainContent>
  <Footer />
</App>
-- Tree component --
```

Hmm, táº¡i sao Ä‘Ã¢y láº¡i lÃ  váº¥n Ä‘á»?. ÄÃ¢y dÆ°á»ng nhÆ° lÃ  cÃ¡ch Ä‘Æ°á»£c Ä‘á» xuáº¥t Ä‘á»ƒ truyá»n dá»¯ liá»‡u trong React. Äá»‘i vá»›i má»™t vÃ i cáº¥p Ä‘á»™, sá»­ dá»¥ng Prop drilling lÃ  tá»‘t.

NhÆ°ng nÃ³ sáº½ trá»Ÿ nÃªn lá»™n xá»™n náº¿u báº¡n Ã¡p dá»¥ng ká»¹ thuáº­t nÃ y á»Ÿ nhiá»u cáº¥p Ä‘á»™ trong cÃ¢y component cá»§a chÃºng ta. VÃ  thá»© hai, náº¿u báº¡n thá»±c hiá»‡n má»™t thay Ä‘á»•i Ä‘á»‘i vá»›i cÃ¡c `props` nÃ y, báº¡n pháº£i cáº­p nháº­t nhá»¯ng thay Ä‘á»•i nÃ y á»Ÿ má»i nÆ¡i, Ä‘iá»u nÃ y khiáº¿n nÃ³ trá»Ÿ nÃªn dÃ i dÃ²ng vÃ  báº¥t tiá»‡n.

Má»™t lÃ½ do ná»¯a Ä‘á»ƒ khuyÃªn chÃºng ta nÃªn trÃ¡nh nÃ³ lÃ  `debugging` ráº¥t cá»±c. TÆ°á»Ÿng tÆ°á»£ng báº¡n báº¡n nháº­n tháº¥y ráº±ng á»Ÿ cáº¥p Ä‘á»™ component nÃ o Ä‘Ã³ mÃ  báº¡n Ä‘ang lÃ m Ä‘iá»u gÃ¬ Ä‘Ã³ vá»›i dá»¯ liá»‡u Ä‘Ã³, báº¡n vÆ°á»£t qua quÃ¡ nhiá»u cáº¥p Ä‘á»™, báº¡n nháº­n Ä‘Æ°á»£c cÃ¡c giÃ¡ trá»‹ sai. BÃ¢y giá» báº¡n pháº£i theo dÃµi dá»¯ liá»‡u thÃ´ng qua táº¥t cáº£ cÃ¡c thÃ nh pháº§n vÃ  tÃ¬m ra lá»—i sai á»Ÿ Ä‘Ã¢u ğŸ¤¢

## Sá»­ dá»¥ng Context? (KhÃ´ng pháº£i giáº£i phÃ¡p)

Khi React giá»›i thiá»‡u vá» Context, nhiá»u láº­p trÃ¬nh viÃªn in ráº±ng nÃ³ lÃ  má»™t giáº£i phÃ¡p thay tháº¿ tá»‘t Ä‘á»ƒ quáº£n lÃ½ Global states vÃ  trÃ¡nh Prop drilling.

Context cho phÃ©p má»™t parent component cung cáº¥p dá»¯ liá»‡u cho toÃ n bá»™ components. ÄÃ¢y lÃ  má»™t vÃ­ dá»¥ vá» viá»‡c sá»­ dá»¥ng React Context:

```tsx
const ProductContext = React.createContext()

function App() {
  const productName = 'The best product ever'

  return (
    <ProductContext.Provider value={productName}>
      <Header />
      <MainContent />
      <Footer />
    </ProductContext.Provider>
  )
}

function ProductHeader() {
  const productName = React.useContext(ProductContext)

  return <h1>{productName}</h1>
}
```

Äiá»u nÃ y cÃ³ váº» hoÃ n háº£o, pháº£i khÃ´ng? KhÃ´ng cáº§n pháº£i chuyá»ƒn cÃ¡c props xuá»‘ng sÃ¢u nhiá»u cáº¥p Ä‘á»™ vÃ  chÃºng ta cÃ³ thá»ƒ truy cáº­p nÃ³ dá»… dÃ ng, nÆ¡i chÃºng ta thá»±c sá»± cáº§n.

Náº¿u báº¡n cÃ¢n nháº¯c sá»­ dá»¥ng ngá»¯ cáº£nh Ä‘á»ƒ trÃ¡nh prop drilling, tÃ´i pháº£i lÃ m báº¡n tháº¥t vá»ng. NÃ³ lÃ  má»™t Ã½ tÆ°á»Ÿng khÃ´ng tá»‘t. VÃ¬ báº¡n pháº£i vÆ°á»£t qua má»™t sá»‘ Ä‘áº¡o cá»¥ á»Ÿ nhiá»u cáº¥p Ä‘á»™ sÃ¢u khÃ´ng cÃ³ nghÄ©a lÃ  báº¡n nÃªn Ä‘Æ°a thÃ´ng tin Ä‘Ã³ vÃ o **Context**.

Tháº­t dá»… dÃ ng Ä‘á»ƒ láº¡m dá»¥ng khÃ¡i niá»‡m nÃ y.

## **Composition nghe láº¡ ta,**

Váº­y, cÃ²n cÃ¡i nÃ o khÃ¡c ngoÃ i Context Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» Prop drilling mÃ  chÃºng ta Ä‘á» cáº­p ban Ä‘áº§u?. CÃ¢u tráº£ lá»i lÃ  **Composition**. Composition trong React cÃ³ nghÄ©a lÃ  cÃ¡ch báº¡n sáº¯p xáº¿p cÃ¢y component cá»§a mÃ¬nh (Dan Abramov, Ä‘Ã£ viáº¿t trÃªn twitter vá» nÃ³Â [being good at composing your React components is a top skill to learn in 2023Â Â â†—](https://twitter.com/dan_abramov/status/1623771055943831553).)

HÃ£y tÃ³m táº¯t tháº­t nhanh. Äáº§u tiÃªn, viá»‡c prop drilling trong React cÃ³ thá»ƒ dÃ i dÃ²ng vÃ  báº¥t tiá»‡n vÃ¬ viá»‡c gá»¡ lá»—i má»™t prop Ä‘Æ°á»£c truyá»n qua nhiá»u thÃ nh pháº§n cÃ³ thá»ƒ khÃ³ gá»¡ lá»—i.

TrÃ­ch xuáº¥t má»™t sá»‘ component trÃªn Ä‘Æ°á»ng báº¡n Ä‘i lÃ  má»™t Ä‘á»‹nh nghÄ©a cho Composition trong React. VÃ¬ váº­y, báº¡n pháº£i tá»± há»i: cÃ³ há»£p lÃ½ khÃ´ng khi component nÃ y Ä‘Æ°á»£c lá»“ng sÃ¢u xuá»‘ng nhiá»u cáº¥p Ä‘á»™ vÃ  chuyá»ƒn dá»¯ liá»‡u dá»c theo nÃ³ mÃ  khÃ´ng quan tÃ¢m? Hoáº·c nÃ³ cÃ³ thá»ƒ á»Ÿ cáº¥p cao hÆ¡n cá»§a cÃ¢y component hoáº·c má»™t pháº§n cá»§a component khÃ¡c Ä‘á»ƒ chÃºng ta cÃ³ thá»ƒ loáº¡i bá» toÃ n bá»™ cáº¥p trÃªn cÃ¢y thÃ nh pháº§n?

ÄÃ¢y luÃ´n lÃ  bÆ°á»›c Ä‘áº§u tiÃªn báº¡n pháº£i thá»±c hiá»‡n, khi báº¡n nháº­n tháº¥y ráº±ng má»™t prop Ä‘Æ°á»£c truyá»n xuá»‘ng quÃ¡ nhiá»u cáº¥p Ä‘á»™ trong component.

Báº¡n cÃ³ nhá»› khi chÃºng ta nháº¯c vá» JSX, HTML attributes phÃ­a trÃªn, Ä‘iá»u nÃ y ráº¥t cÃ³ Ã­ch khi chÃºng ta nghÄ© vá» Composition trong React vÃ  muá»‘n trÃ¡nh Prop drilling. ÄÃ¢y lÃ  vÃ­ dá»¥ vá» cÃ¡c chÃºng ta Ã¡p dá»¥ng composition:

```tsx
-- Tree component --
const productName = 'The best product ever'

<App>
  <Header />
  <MainContent>
    <ProductList productName={productName}>
      <ProductCard>
        <ProductDetailsModal>
          <ProductDetails>
            <ProductHeader />
            <ProductDescription />
            <ProductPrice />
          </ProductDetails>
        </ProductDetailsModal>
      </ProductCard>
    </ProductList>
  </MainContent>
  <Footer />
</App>
-- Tree component --

function ProductList ({ productName }) {
  return (
    <ProductCard>
      <ProductDetailsModal>
        <ProductDetails>
          <ProductHeader>
            <h1>{productName}</h1>
          </ProductHeader>
          <ProductDescription />
          <ProductPrice />
        </ProductDetails>
      </ProductDetailsModal>
    </ProductCard>
  )
}
```

Trong vÃ­ dá»¥ nÃ y, **Composition** trong React Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ trÃ¡nh Drop drilling báº±ng cÃ¡ch truyá»n cÃ¡c props cáº§n thiáº¿t qua cÃ¡c components con náº±m trá»±c tiáº¿p trong `children` cá»§a component cha cá»§a nÃ³.

## Káº¿t luáº­n

TÃ³m láº¡i, Composition trong React lÃ  má»™t ká»¹ thuáº­t máº¡nh máº½ cÃ³ thá»ƒ giÃºp trÃ¡nh viá»‡c Prop drilling, Ä‘Ã¢y lÃ  má»™t váº¥n Ä‘á» phá»• biáº¿n khi chuyá»ƒn props xuá»‘ng má»™t sá»‘ cáº¥p Ä‘á»™ trong component.

TrÃ¡nh Ä‘Æ°á»£c Prop drilling, má»i thá»© trá»Ÿ nÃªn sáº¡ch sáº½, dá»… kiá»ƒm soÃ¡t vÃ  báº£o trÃ¬ hÆ¡n. Sá»­ dá»¥ng composition, chÃºng ta cÃ³ thá»ƒ module hoÃ¡ vÃ  tÃ¡i sá»­ dá»¥ng component dá»… hÆ¡n.
      